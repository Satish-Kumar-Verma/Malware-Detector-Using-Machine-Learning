import json
import os

DEFAULT_CONFIG_FILE = os.path.join(os.getcwd(), 'config', 'config.json')

def load_config(config_file=DEFAULT_CONFIG_FILE):
    if not os.path.exists(config_file):
        os.makedirs(os.path.dirname(config_file), exist_ok=True)
        return {
            "general": {
                "real_time_protection": True,
                "scheduled_scan": {"enabled": False, "frequency": "Daily", "time": "12:00"},
                "language": "English",
                "theme": "Light"
            },
            "scan": {
                "default_scan_type": "Quick",
                "exclusions": [],
                "sensitivity": "Normal"
            },
            "update": {
                "auto_update": True
            },
            "notifications": {
                "enabled": True,
                "sound": True
            },
            "config_file_location": config_file
        }
    with open(config_file, 'r') as file:
        return json.load(file)

def save_config(config, config_file=None):
    config_file = config_file or config["config_file_location"]
    os.makedirs(os.path.dirname(config_file), exist_ok=True)
    with open(config_file, 'w') as file:
        json.dump(config, file, indent=4)

def import_config(file_path):
    with open(file_path, 'r') as file:
        config = json.load(file)
    config["config_file_location"] = file_path
    save_config(config, file_path)
    return config
